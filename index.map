{
	"version": 3,
	"sources": [
		"/Users/david/Developer/Tori/dlfbgraph/index._js"
	],
	"names": [],
	"mappings": ";;;;;;;;;;;;;;AAMA,IAAM,KAAK,GAAG,OAAO,CAAC,SAAS,CAAC,CAAC;AACjC,IAAM,MAAM,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC;;AAIvC,KAAK,CAAC,WAAW,GAAG,GAAG,CAAC;AACxB,KAAK,CAAC,UAAU,GAAG,GAAG,CAAC;AACvB,KAAK,CAAC,YAAY,GAAG,GAAG,CAAC;;AAEzB,KAAK,CAAC,aAAa,GAAG,IAAI,CAAC;;;;AAI3B,KAAK,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;;;;AAIxB,IAAM,QAAQ,GAAG,KAAK,CAAC,GAAG,CAAC;AAC3B,KAAK,CAAC,GAAG;;AAEP,QAAI,CAAC,UAAU,gBAAc,GAAG,OAAI,CAAC;;AAErC;AAEE,UAAM,MAAM,0CAAG,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,kBAAC,GAAG,OAAI,CAAC;AAC5C,UAAI,CAAC,YAAY,2BAAyB,GAAG,iBAAc,MAAM,CAAC,CAAC;AACnE,aAAO,MAAM,CAAC;MAEhB,OAAO,EAAE;;AAGP,UAAI,EAAE,CAAC,IAAI,KAAK,GAAG;AAEjB,cAAI,CAAC,WAAW,CAAC,0DAA0D,CAAC,CAAC;AAC7E,2CAAA,IAAI,0CAAmB;AACvB,2CAAA,KAAK,yBAAK,GAAG,QAAK;;AAIlB,gBAAM,EAAE,CAAC;SACV;KACF;;QACF,CAAC;;AAEF,KAAK,CAAC,YAAY;;AAEhB,QAAI,CAAC,aAAa,GAAG,IAAI,MAAM,CAC7B,KAAK,EACL,YAAY,EACZ,6BAA6B,CAC9B,CAAC;;AAEF,qCAAA,IAAI,0CAAmB;;QACxB,CAAC;;AAEF,KAAK,CAAC,cAAc;;AAElB,QAAI,CAAC,IAAI,CAAC,aAAa;AAErB,cAAM,IAAI,KAAK,CAAC,wEAAwE,CAAC,CAAC;OAC3F;;AAED,QAAM,KAAK,oCAAG,IAAI,CAAC,aAAa,yCAC9B,EAAE,EACF,EAAE,UAAU,EAAE,oBAAoB,EAAE,OAErC,CAAC;;AAEF,QAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC;;QAC5B,CAAC;;AAEF,KAAK,CAAC,aAAa;;AAEjB,WAAO,IAAI,CAAC,qBAAqB,kCAAC,IAAI,yBAAK,QAAQ,QAAK,CAAC;;QAC1D,CAAC;;AAEF,KAAK,CAAC,qBAAqB,GAAG,SAAS,qBAAqB,CAAC,YAAY;AAEvE,SAAO;AACL,YAAQ,EAAE,YAAY;AACtB,QAAI;;AAEF,YAAI,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC;AAE/B,mBAAO,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC;iBAE/B,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI;AAExD,gBAAI,CAAC,QAAQ,oCAAG,IAAI,yBAAK,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,OAAI,CAAC;AACvD,mBAAO,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC;WACnC;;YACF;GACF,CAAC;CACH,CAAC;;AAEF,MAAM,CAAC,OAAO,GAAG,KAAK,CAAC",
	"file": "/Users/david/Developer/Tori/dlfbgraph/index._js",
	"sourcesContent": [
		"/**\n * index.js\n */\n\n/* === Imports === */\n\nconst graph = require('fbgraph');\nconst OAuth2 = require('oauth').OAuth2;\n\nfunction nop() {}\n\ngraph.errorLogger = nop;\ngraph.callLogger = nop;\ngraph.resultLogger = nop;\n\ngraph.oauthInstance = null;\n\n/* === Setup === */\n\ngraph.setVersion('2.5');\n\n/* === Methods === */\n\nconst graphGet = graph.get;\ngraph.get = function wrappedGet(url, _)\n{\n  this.callLogger(`graph.get(${url})`);\n\n  try\n  {\n    const result = graphGet.bind(graph)(url, _);\n    this.resultLogger(`FB Graph API call to ${url} returned:`, result);\n    return result;\n  }\n  catch (ex)\n  {\n    // If the token has expired\n    if (ex.code === 190)\n    {\n      this.errorLogger('Facebook token expired, attempting to re-authenticate...');\n      this.reauthenticate(_);\n      graph.get(url, _);\n    }\n    else\n    {\n      throw ex;\n    }\n  }\n};\n\ngraph.authenticate = function authenticate(appID, appSecretKey, _)\n{\n  this.oauthInstance = new OAuth2(\n    appID,\n    appSecretKey,\n    'https://graph.facebook.com/'\n  );\n\n  this.reauthenticate(_);\n};\n\ngraph.reauthenticate = function reauthenticate(_)\n{\n  if (!this.oauthInstance)\n  {\n    throw new Error('Attempting to re-authenticate with Facebook with no credentials stored');\n  }\n\n  const token = this.oauthInstance.getOAuthAccessToken(\n    '',\n    { grant_type: 'client_credentials' }, // eslint-disable-line camelcase\n    _\n  );\n\n  this.setAccessToken(token);\n};\n\ngraph.itemGenerator = function itemGenerator(startURL, _)\n{\n  return this.existingItemGenerator(this.get(startURL, _));\n};\n\ngraph.existingItemGenerator = function existingItemGenerator(existingItem)\n{\n  return {\n    response: existingItem,\n    next(_)\n    {\n      if (this.response.data.length > 0)\n      {\n        return this.response.data.shift();\n      }\n      else if (this.response.paging && this.response.paging.next)\n      {\n        this.response = this.get(this.response.paging.next, _);\n        return this.response.data.shift();\n      }\n    }\n  };\n};\n\nmodule.exports = graph;\n"
	]
}